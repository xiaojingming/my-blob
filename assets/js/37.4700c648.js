(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{588:function(e,t,s){"use strict";s.r(t);var n=s(13),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h3",{attrs:{id:"minusone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minusone"}},[e._v("#")]),e._v(" MinusOne")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/type-challenges/type-challenges/blob/main/questions/02257-medium-minusone/README.zh-CN.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("type-challenge-minusOne github地址"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("难度：中等")]),e._v(" "),s("h4",{attrs:{id:"题目描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#题目描述"}},[e._v("#")]),e._v(" 题目描述")]),e._v(" "),s("p",[e._v("Given a number (always positive) as a type. Your type should return the number decreased by one.")]),e._v(" "),s("blockquote",[s("p",[e._v("(给定一个正整数作为类型的参数，要求返回的类型是该数字减 1。)")])]),e._v(" "),s("p",[e._v("For example:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("type Zero = MinusOne<1> // 0\ntype FiftyFour = MinusOne<55> // 54\n")])])]),s("p",[e._v("🤣一开始看到这个题目的时候，根本不知道从何入手......后面通过查看别人提交的代码，逐渐有了一点思路。首先TS没有运算能力，或者说需要通过"),s("code",[e._v("length")]),e._v("来获取数组属性来得到数字类型，所以上面的问题可以转化成下面这样的形式：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("type CountRest<T extends number> = xxx;\ntype MinusOne<T extends number> = CountRest<T> extends [1, ...infer Rest]\n  ? Rest['length']\n  : 0;\n")])])]),s("p",[e._v("这样就可以通过获取"),s("code",[e._v("Rest['length']")]),e._v("来获取长度了，所以现在只需要理清"),s("code",[e._v("CountRest")]),e._v("的逻辑即可。从"),s("code",[e._v("CountRest")]),e._v("字面量层面上也可以看出这是一个获取Rest参数的数量的类型（函数），这时候就面临一个问题，如何保存这个数量，"),s("strong",[e._v("可以通过添加一个泛型参数来保存")]),e._v("，因为在"),s("code",[e._v("MinusOne")]),e._v("中是使用"),s("code",[e._v("[1, ...infer Rest]")]),e._v("来进行匹配，所以在"),s("code",[e._v("CountRest")]),e._v("第二个泛型我们传递的是每一项都为一的数组("),s("code",[e._v("Array<1>")]),e._v(")。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("type CountRest<T extends number, Sum extends Array<1> = []> = T extends Sum['length']\n  ? [...Sum]\n  : CountRest<T, [1, ...Sum]>;\n")])])]),s("p",[e._v("主要的逻辑就是通过递归去判断保存的数量是否等于传入的"),s("code",[e._v("T")]),e._v("，不相等就会递归，并且"),s("code",[e._v("Sum")]),e._v("中添加1，最后返回长度等于"),s("code",[e._v("T")]),e._v("的数组。")]),e._v(" "),s("h4",{attrs:{id:"还存在的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#还存在的问题"}},[e._v("#")]),e._v(" 还存在的问题")]),e._v(" "),s("p",[e._v("上面的代码其实还存在一个问题，在"),s("a",{attrs:{href:"https://www.typescriptlang.org/play?#code/PQKgUABBBM0KwHYIFoIFkCWA7ArgZwHksBTSFZCysgIwE918AXAQwDMB7CAMWYwC8IACgACrZrT6SAtgEoIAYkC0coElvBVOaMAFmTLy9EQBkZgO7cdUQJt+gLO1AAHKAqOUDG1oBdTQA6mgHXlAXHKBvH0DR6oBC3QEPKToAw-4CBkYBCNoAr8YB7aj7egPRmgKfRToDq2oDzihAAjIBADKYQgNHygEGaAFw5AAZljHhkjLQADsQQAFrEAE6cALzo2PhExAA86QB8EMDAEAAMVbX1XBis1VzsOM0QHZi4hCS9cHBDIxBwACxkZSU5Q4AU6hAA4hhaONQQgFBygKfmgNDugFj-moyMNXiFIxUAMaaAB0ACs8CD2M0AObAWCIYB8TTIADCADkwCBgGBcaAIAB9InEknEiCAA3kfIBjuUAgB6E0kMgkQbG46p1TrrHq9AAqEGIAA9GMQsAATPAQXBSagtIYdZhYWi4sD4xkMiCAaVtAKvRgApXXL01VklkYKQ1aGMCBs+oAbwgAFEAI44ZgAGwANHb+XVAeaAL4QVitKQQADkwktyGBLudwphxDwwBwjAwzrwwdZUwggOYeDjKwgAG0yLbPcRvb0HU7nb01t1NoN3WMBgNXUWS2WKy7q10Nn1ts39gcmy2oMWvYxy47OzWe70AMz96BD1tjieVrucutjRvugCcO6XI7b447VenXPS6TG9Yyl8bzbAAF0lcqQPqDUzANByVkAptZvg3MnFQDIIZADAlQBquUpQBjyMAFW9Pm+X5-mAIFQQhKFYXheAEGAeU8AAdxaJEUQxYCIDeGC4J+P4ATwYFwUhaE4QRLC8HYZ1EwwdgsEqKAhkAF7NACxNYwKIQ6jaNQhjCLRTEWTAIA",target:"_blank",rel:"noopener noreferrer"}},[e._v("测试用例中"),s("OutboundLink")],1),e._v("，有一个例子是无法通过的：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("MinusOne<1101> // number因为循环过深导致无法推断出类型\n")])])]),s("p",[e._v("😂确实不知道要怎么样去弄了，以后有机会找一下相关的答案")])])}),[],!1,null,null,null);t.default=a.exports}}]);